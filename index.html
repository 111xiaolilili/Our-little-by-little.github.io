<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="Keywords" content="">
    <meta name="Description" content="">
    <title>图册</title>
    <!-- 小孙的代码分享 -->
    <!-- 层叠样式表 -->
    <style type="text/css">
        /* 去掉默认效果 */
        * {
            margin: 0;
            padding: 0;
        }

        body {
            background: #222;
            overflow: hidden;
            /* 取消选中 */
            user-select: none;
        }

        @keyframes rotate {
            100% {
                transform: rotateY(360deg);
            }
        }

        .perspective {
            /*子元素透视 场景深度*/
            perspective: 600px;
        }

        .wrap {
            /* 3d */
            width: 135px;
            height: 240px;
            margin: 100px auto;
            position: relative;
            /* border: 1px solid red; */
            transform: rotateX(-20deg) rotateY(0deg);
            transform-style: preserve-3d;
        }

        .wrap img {
            display: block;
            /* 绝对定位 */
            position: absolute;
            width: 100%;
            height: 100%;
            transform: rotateY(0deg) translateZ(0px);
            background: transparent;
            box-shadow: 0 0 4px #fff;
            border-radius: 5px;
        }

        /* 照片底座 */
        .wrap p {
            width: 1200px;
            height: 1200px;
            background: -webkit-radial-gradient(center center, 600px 600px, rgba(122, 122, 122, .5), rgba(0, 0, 0, 0));
            position: absolute;
            border-radius: 50%;
            left: 50%;
            top: 100%;
            margin-left: -600px;
            margin-top: -600px;
            /* 沿着x轴按倒 */
            transform: rotateX(90deg);
        }
    </style>
</head>

<body>
    <!-- 盒子容器 -->
    <div class="perspective">
        <div class="wrap" id="imgwrap">
            <!-- 引入图片值页面 -->
            <img class="f1" src="img/12.png" />
            <img class="f1" src="img/13.png" />
            <img class="f1" src="img/14.png" />
            <img class="f1" src="img/19.png" />
            <img class="f1" src="img/20.png" />
            <img class="f1" src="img/21.png" />
            <img class="f1" src="img/22.png" />
            <img class="f1" src="img/23.png" />
            <img class="f1" src="img/15.png" />
            <img class="f1" src="img/16.png" />
            <img class="f1" src="img/1.png" />
 <img class="f1" src="img/17.png" />
            <img class="f1" src="img/18.png" />
            <img class="f1" src="img/7.png" />
            <img class="f1" src="img/5.png" />
            <img class="f1" src="img/6.png" />
            <img class="f1" src="img/7.png" />
            <img class="f1" src="img/8.png" />
            <img class="f1" src="img/9.png" />
            <img class="f1" src="img/10.png" />
            <img class="f1" src="img/2.png" />
            <img class="f1" src="img/3.png" />
            <img class="f1" src="img/4.png" />
            <img class="f1" src="img/5.png" />
            <img class="f1" src="img/6.png" />
            <img class="f1" src="img/11.png" />

           

            <img class="f1" src="img/24.png" />
            <img class="f1" src="img/25.png" />
            <img class="f1" src="img/26.png" />
            <img class="f1" src="img/27.png" />
            <img class="f1" src="img/28.png" />
            <img class="f1" src="img/29.png" />
            <img class="f1" src="img/30.png" />

            <img class="f2" src="img/1.png" />
            <img class="f2" src="img/2.png" />
            <img class="f2" src="img/3.png" />
            <img class="f2" src="img/4.png" />
            <img class="f2" src="img/5.png" />

            <img class="f2" src="img/9.png" />
            <img class="f2" src="img/10.png" />
            <img class="f2" src="img/11.png" />
            <img class="f2" src="img/12.png" />
      
            <img class="f2" src="img/6.png" />
            <img class="f2" src="img/7.png" />
            <img class="f2" src="img/5.png" />
            <img class="f2" src="img/6.png" />
            <img class="f2" src="img/7.png" />
            <img class="f2" src="img/8.png" />
            <img class="f2" src="img/29.png" />
   
            <img class="f2" src="img/23.png" />
            <img class="f2" src="img/24.png" />
            <img class="f2" src="img/16.png" />
         <img class="f2" src="img/30.png" />
            <img class="f2" src="img/13.png" />
            <img class="f2" src="img/14.png" />
            <img class="f2" src="img/15.png" />      
	   <img class="f2" src="img/25.png" />
            <img class="f2" src="img/26.png" />
            <img class="f2" src="img/27.png" />
            <img class="f2" src="img/28.png" />
            <img class="f2" src="img/21.png" />
            <img class="f2" src="img/22.png" />
            <img class="f2" src="img/17.png" />
            <img class="f2" src="img/18.png" />
            <img class="f2" src="img/19.png" />
            <img class="f2" src="img/20.png" />


            <img class="f3" src="img/1.png" />
            <img class="f3" src="img/2.png" />
            <img class="f3" src="img/11.png" />
            <img class="f3" src="img/5.png" />
            <img class="f3" src="img/22.png" />
            <img class="f3" src="img/23.png" />
            <img class="f3" src="img/24.png" />
            <img class="f3" src="img/9.png" />
            <img class="f3" src="img/14.png" />
            <img class="f3" src="img/16.png" />
            <img class="f3" src="img/17.png" />
            <img class="f3" src="img/18.png" />
            <img class="f3" src="img/10.png" />
            <img class="f3" src="img/28.png" />

            <img class="f3" src="img/12.png" />
            <img class="f3" src="img/25.png" />
            <img class="f3" src="img/26.png" />
            <img class="f3" src="img/27.png" />
            <img class="f3" src="img/3.png" />
            <img class="f3" src="img/4.png" />
            <img class="f3" src="img/29.png" />
            <img class="f3" src="img/30.png" />
            <img class="f3" src="img/13.png" />
            <img class="f3" src="img/19.png" />
            <img class="f3" src="img/20.png" />
            <img class="f3" src="img/21.png" />

            <img class="f3" src="img/15.png" />
            <img class="f3" src="img/6.png" />
            <img class="f3" src="img/7.png" />
            <img class="f3" src="img/5.png" />
            <img class="f3" src="img/6.png" />
            <img class="f3" src="img/7.png" />
            <img class="f3" src="img/8.png" />

            <p></p>
        </div>
    </div>

<script type="text/javascript">
    var oImg = document.getElementsByClassName('f1');
    var oImg2 = document.getElementsByClassName('f2');
    var oImg3 = document.getElementsByClassName('f3');
    var len = oImg.length;
    var deg = 360 / len;
    var oWrap = document.getElementById("imgwrap");

    // 打乱数组
    function shuffleArray(arr) {
        for (let i = arr.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
    }

    shuffleArray(oImg);
    shuffleArray(oImg2);
    shuffleArray(oImg3);

    window.onload = function () {
        Array.prototype.forEach.call(oImg, function (ele, index) {
            ele.style.transform = "rotateY(" + deg * index + "deg) translateZ(645.75px)";
            ele.style.transition = "1s " + (len - index) * 0.1 + "s";
        });

        Array.prototype.forEach.call(oImg2, function (ele, index) {
            ele.style.transform = "rotateY(" + deg * index + "deg) translateZ(645.75px) translateY(240px)";
            ele.style.transition = "1s " + (len - index) * 0.1 + "s";
        });

        Array.prototype.forEach.call(oImg3, function (ele, index) {
            ele.style.transform = "rotateY(" + deg * index + "deg) translateZ(645.75px) translateY(480px)";
            ele.style.transition = "1s " + (len - index) * 0.1 + "s";
        });
    };

    // 控制参数
    var newX, newY, lastX, lastY, minusX, minusY;
    var rotX = -20, rotY = 0, scale = 1;

    function startDrag(e) {
        e.preventDefault();

        if (e.type === "mousedown") {
            lastX = e.clientX;
            lastY = e.clientY;
        } else if (e.type === "touchstart" && e.touches.length === 1) {
            lastX = e.touches[0].clientX;
            lastY = e.touches[0].clientY;
        } else if (e.type === "touchstart" && e.touches.length === 2) {
            lastDist = getDistance(e.touches);
        }

        function moveHandler(e) {
            if (e.type === "mousemove") {
                newX = e.clientX;
                newY = e.clientY;

                minusX = newX - lastX;
                minusY = newY - lastY;

                // ✅ 上下 & 左右都是正向逻辑
                rotX += minusY * 0.2;
                rotY += minusX * 0.1;

                oWrap.style.transform =
                    "scale(" + scale + ") rotateX(" + rotX + "deg) rotateY(" + rotY + "deg)";

                lastX = newX;
                lastY = newY;
            } else if (e.type === "touchmove") {
                if (e.touches.length === 1) {
                    newX = e.touches[0].clientX;
                    newY = e.touches[0].clientY;

                    minusX = newX - lastX;
                    minusY = newY - lastY;

                    // ✅ 上下 & 左右都是正向逻辑
                    rotX += minusY * 0.2;
                    rotY += minusX * 0.1;

                    oWrap.style.transform =
                        "scale(" + scale + ") rotateX(" + rotX + "deg) rotateY(" + rotY + "deg)";

                    lastX = newX;
                    lastY = newY;
                } else if (e.touches.length === 2) {
                    var newDist = getDistance(e.touches);
                    var delta = newDist - lastDist;
                    scale += delta * 0.001;
                    if (scale < 0.3) scale = 0.3;
                    if (scale > 3) scale = 3;

                    oWrap.style.transform =
                        "scale(" + scale + ") rotateX(" + rotX + "deg) rotateY(" + rotY + "deg)";
                    lastDist = newDist;
                }
            }
        }

        function endHandler() {
            document.removeEventListener("mousemove", moveHandler);
            document.removeEventListener("mouseup", endHandler);
            document.removeEventListener("touchmove", moveHandler);
            document.removeEventListener("touchend", endHandler);
        }

        document.addEventListener("mousemove", moveHandler);
        document.addEventListener("mouseup", endHandler);
        document.addEventListener("touchmove", moveHandler, { passive: false });
        document.addEventListener("touchend", endHandler);
    }

    // 计算双指距离
    function getDistance(touches) {
        var dx = touches[0].clientX - touches[1].clientX;
        var dy = touches[0].clientY - touches[1].clientY;
        return Math.sqrt(dx * dx + dy * dy);
    }

    // 鼠标滚轮缩放
    oWrap.addEventListener(
        "wheel",
        function (e) {
            e.preventDefault();
            if (e.deltaY < 0) {
                scale += 0.1; // 放大
            } else {
                scale -= 0.1; // 缩小
            }
            if (scale < 0.3) scale = 0.3;
            if (scale > 3) scale = 3;
            oWrap.style.transform =
                "scale(" + scale + ") rotateX(" + rotX + "deg) rotateY(" + rotY + "deg)";
        },
        { passive: false }
    );

    oWrap.addEventListener("mousedown", startDrag);
    oWrap.addEventListener("touchstart", startDrag, { passive: false });
</script>





</body>

</html>
